/*! -v1.2.0 公农历日期选择器 MIT License  https://github.com/chenruifu/rui-datepicker#readme  By 羯瑞 */
 ;window.ruiDatepicker=function(){"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var n=this;function e(r){return function(e){var t=n.className.split(/\s+/g),a=t.indexOf(e);r(t,a,e),n.className=t.join(" ")}}return{add:e(function(e,t,a){~t||e.push(a)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,a){~t?e.splice(t,1):e.push(a)}),contains:function(e){return!!~n.className.split(/\s+/g).indexOf(e)},item:function(e){return n.className.split(/\s+/g)[e]||null}}}});var datePicker=function(){this.gearDate,this.minY=1940,this.minM=1,this.minD=1,this.maxY=2030,this.maxM=12,this.maxD=31,this.type=1};return datePicker.prototype={init:function(options){"string"==typeof options&&(options={id:options}),this.trigger=document.querySelector(options.id),this.bindEvent("date"),this.callback=eval(this.trigger.getAttribute("data-callback"))||options.callback||function(){}},bindEvent:function(e){var g=this,f=[new a(38,0,0,38,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(26,6,2,44,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(45,0,3,49,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(35,0,4,54,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(24,4,5,59,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(43,0,0,5,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(32,0,1,10,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(21,2,2,15,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(40,0,3,20,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(28,7,5,26,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(47,0,6,31,0,1,1,0,1,1,0,0,1,0,1,0,1),new a(36,0,0,36,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(26,5,1,41,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(44,0,3,47,0,1,0,0,1,1,0,1,1,0,1,0,1),new a(33,0,4,52,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(23,3,5,57,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(42,0,6,2,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(30,8,1,8,1,0,1,0,1,0,0,1,0,1,0,1,0),new a(48,0,2,13,1,1,1,0,1,0,0,1,0,1,0,1,0),new a(38,0,3,18,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(27,6,4,23,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(45,0,6,29,1,0,1,0,1,0,1,1,0,1,0,1,0),new a(35,0,0,34,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(24,4,1,39,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(43,0,2,44,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(32,0,4,50,0,1,0,1,0,0,1,0,0,1,1,0,1),new a(20,3,5,55,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(39,0,6,0,1,1,0,1,1,0,0,1,0,1,0,1,0),new a(29,7,0,5,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(47,0,2,11,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(36,0,3,16,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(26,5,4,21,0,1,0,0,1,0,1,0,1,1,1,0,1),new a(45,0,5,26,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(33,0,0,32,1,0,1,0,0,1,0,0,1,1,0,1,1),new a(22,4,1,37,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(41,0,2,42,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(30,8,3,47,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(48,0,5,53,1,0,1,1,0,1,0,1,0,1,0,0,1),new a(37,0,6,58,1,0,1,1,0,1,1,0,1,0,1,0,1),new a(27,6,0,3,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(46,0,1,8,1,0,0,1,0,1,0,1,1,0,1,1,0),new a(35,0,3,14,0,1,0,0,1,0,0,1,1,0,1,1,1),new a(24,4,4,19,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(43,0,5,24,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(32,10,6,29,1,0,1,1,0,0,1,0,0,1,0,1,1),new a(50,0,1,35,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(39,0,2,40,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(28,6,3,45,1,0,1,0,1,1,0,1,1,0,1,0,0),new a(47,0,4,50,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(36,0,6,56,1,0,0,1,0,1,0,1,0,1,1,1,0),new a(26,5,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(45,0,1,6,0,1,0,0,1,0,0,1,0,1,1,1,0),new a(34,0,2,11,0,1,1,0,0,1,0,0,1,0,1,1,0),new a(22,3,4,17,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(40,0,5,22,1,1,1,0,1,0,1,0,0,1,0,1,0),new a(30,8,6,27,0,1,1,0,1,0,1,1,0,0,1,0,1),new a(49,0,0,32,0,1,0,1,1,0,1,0,1,1,0,0,1),new a(37,0,2,38,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(27,5,3,43,1,0,0,1,0,0,1,1,0,1,1,0,1),new a(46,0,4,48,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(35,0,5,53,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(23,4,0,59,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(42,0,1,4,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(31,0,2,9,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(21,2,3,14,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(39,0,5,20,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(28,7,6,25,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(48,0,0,30,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(37,0,1,35,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(25,5,3,41,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(44,0,4,46,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(33,0,5,51,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(22,4,6,56,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(40,0,1,2,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(30,9,2,7,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(49,0,3,12,0,1,0,0,1,0,1,1,1,0,1,0,1),new a(38,0,4,17,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(27,6,6,23,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(46,0,0,28,0,1,0,1,0,0,1,0,1,0,1,1,0),new a(35,0,1,33,1,0,1,0,1,0,0,1,0,0,1,1,0),new a(24,4,2,38,0,1,1,1,0,1,0,0,1,0,1,0,1),new a(42,0,4,44,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(31,0,5,49,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(21,2,6,54,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(40,0,0,59,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(28,6,2,5,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(47,0,3,10,1,0,1,0,0,1,0,0,1,1,1,0,1),new a(36,0,4,15,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(25,5,5,20,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(43,0,0,26,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(32,0,1,31,1,1,0,1,1,0,1,0,1,0,1,0,0)];function t(){document.activeElement.blur(),g.gearDate=document.createElement("div"),g.gearDate.className="gearDate";var e=g.trigger.getAttribute("data-toid-hour"),t=g.trigger.getAttribute("data-toid-minute"),a='<div class="date_ctrl bounceInUp">';a+='<div class="date_btn_wrap">',a+='<div class="date_btn lcalendar_cancel">取消</div>',a+='<div class="date_btn lcalendar_finish">确认</div>',a+="</div>",a+='<div class="date_choice_wrap">',a+='<div class="date_class_box">',a+='<div class="date_class lcalendar_gongli">公历</div>',a+='<div class="date_class lcalendar_nongli">农历</div>',a+="</div>",a+='<div class="date_roll_mask">',a+=e?t?'<div class="date_roll date_roll_hhii">':'<div class="date_roll date_roll_hh">':'<div class="date_roll">',a+='<div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"></div></div>',a+='<div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"></div></div>',a+='<div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"></div></div>',e&&(a+='<div><div class="gear date_hh" data-datetype="date_hh"></div><div class="date_grid"></div></div>',t&&(a+='<div><div class="gear date_ii" data-datetype="date_ii"></div><div class="date_grid"></div></div>')),a+="</div></div></div>",a+='<div class="date_confirm_wrap">',a+='<div class="confirm_tit">确认时间</div>',a+='<div class="confirm_tip">请确认输入的时间是否正确</div>',a+='<div class="confirm_p">公(阳)历：<b class="confirm_gongli"></b></div>',a+='<div class="confirm_p">农(阴)历：<b class="confirm_nongli"></b></div>',a+='<div class="confirm_btn">',a+='<div class="confirm_btn_cancel">返回修改</div>',a+='<div class="confirm_btn_finish">确认正确</div>',a+="</div>",a+="</div>",a+="</div>",g.gearDate.innerHTML=a,document.body.appendChild(g.gearDate),g.trigger.getAttribute("data-nochange")&&((r=g.gearDate.querySelector(".date_class")).style.zIndex="-1",r.style.position="relative",r.style.opacity="0"),a={yy:(a=new Date).getYear(),mm:a.getMonth(),dd:a.getDate()-1},/^\d{4}-\d{1,2}-\d{1,2}$/.test(g.trigger.getAttribute("data-date"))?(n=g.trigger.getAttribute("data-date").match(/(^|-)\d{1,4}/g),a.yy=n[0]-g.minY,a.mm=n[1].replace(/-/g,"")-1,a.dd=n[2].replace(/-/g,"")-1):(a.yy=a.yy+1874-g.minY,a.mm=6,a.dd=0),g.gearDate.querySelector(".date_yy").setAttribute("val",a.yy),g.gearDate.querySelector(".date_mm").setAttribute("val",a.mm),g.gearDate.querySelector(".date_dd").setAttribute("val",a.dd),g.gearDate.querySelector(".date_hh")&&(n=0,g.trigger.getAttribute("data-hour")&&0<=g.trigger.getAttribute("data-hour")&&(n=parseInt(Math.round(g.trigger.getAttribute("data-hour"))+1)),g.gearDate.querySelector(".date_hh").setAttribute("val",n)),g.gearDate.querySelector(".date_ii")&&(i=0,g.trigger.getAttribute("data-minute")&&0<=g.trigger.getAttribute("data-minute")&&(i=parseInt(Math.round(g.trigger.getAttribute("data-minute")))),g.gearDate.querySelector(".date_ii").setAttribute("val",i)),parseInt(g.trigger.getAttribute("data-type"))?(g.type=1,(i=g.gearDate.querySelector(".lcalendar_nongli")).className=i.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",d=g.maxY-g.minY+1,i=a.yy%d+g.minY,d=a.mm+1,a=a.dd+1,d=l(0,i,d,a),a=f[d.yy-g.minY].Intercalation?f[d.yy-g.minY].Intercalation:0,d.mm<0?d.mm=1-d.mm:a&&d.mm-1>=a&&(d.mm=d.mm+1),g.gearDate.querySelector(".date_yy").setAttribute("val",d.yy-g.minY),g.gearDate.querySelector(".date_mm").setAttribute("val",d.mm-1),g.gearDate.querySelector(".date_dd").setAttribute("val",d.dd-1)):(g.type=0,(d=g.gearDate.querySelector(".lcalendar_gongli")).className=d.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active"),o();var r="ontouchstart"in window;g.gearDate.querySelector(".lcalendar_cancel").addEventListener(r?"touchstart":"click",b),g.gearDate.querySelector(".lcalendar_finish").addEventListener(r?"touchstart":"click",D),g.gearDate.querySelector(".confirm_btn_cancel").addEventListener(r?"touchstart":"click",b),g.gearDate.querySelector(".confirm_btn_finish").addEventListener(r?"touchstart":"click",D);var n=g.gearDate.querySelector(".lcalendar_gongli"),i=g.gearDate.querySelector(".lcalendar_nongli");n.addEventListener(r?"touchstart":"click",function(){s("gongli")},!1),i.addEventListener(r?"touchstart":"click",function(){s("nongli")},!1);var a=g.gearDate.querySelector(".date_yy"),d=g.gearDate.querySelector(".date_mm"),n=g.gearDate.querySelector(".date_dd"),i=g.gearDate.querySelector(".date_hh"),r=g.gearDate.querySelector(".date_ii");a.addEventListener("touchstart",u),d.addEventListener("touchstart",u),n.addEventListener("touchstart",u),i&&i.addEventListener("touchstart",u),r&&r.addEventListener("touchstart",u),a.addEventListener("mousedown",c),d.addEventListener("mousedown",c),n.addEventListener("mousedown",c),i&&i.addEventListener("mousedown",c),r&&r.addEventListener("mousedown",c),a.addEventListener("touchmove",y),d.addEventListener("touchmove",y),n.addEventListener("touchmove",y),i&&i.addEventListener("touchmove",y),r&&r.addEventListener("touchmove",y),a.addEventListener("touchend",h),d.addEventListener("touchend",h),n.addEventListener("touchend",h),i&&i.addEventListener("touchend",h),r&&r.addEventListener("touchend",h),g.gearDate.addEventListener("touchmove",function(e){e.preventDefault()}),0<navigator.userAgent.indexOf("Firefox")?(g.gearDate.addEventListener("DOMMouseScroll",function(e){e.preventDefault()},!1),a.addEventListener("DOMMouseScroll",m,!1),d.addEventListener("DOMMouseScroll",m,!1),n.addEventListener("DOMMouseScroll",m,!1),i&&i.addEventListener("DOMMouseScroll",m,!1),r&&r.addEventListener("DOMMouseScroll",m,!1)):(g.gearDate.onmousewheel=function(e){return!1},a.onmousewheel=m,d.onmousewheel=m,n.onmousewheel=m,i&&(i.onmousewheel=m),r&&(r.onmousewheel=m))}function s(e){var t,a=g.gearDate.querySelector(".lcalendar_nongli"),r=g.gearDate.querySelector(".lcalendar_gongli"),n=0;"nongli"==e&&1!=g.type?(a.className=a.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",r.className=r.className.replace(/active/,""),n=g.type=1):"gongli"==e&&0!=g.type&&(a.className=a.className.replace(/active/,""),r.className=r.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",g.type=0,n=1),n&&(t=g.maxY-g.minY+1,a=parseInt(Math.round(g.gearDate.querySelector(".date_yy").getAttribute("val"))),r=parseInt(Math.round(g.gearDate.querySelector(".date_mm").getAttribute("val")))+1,n=parseInt(Math.round(g.gearDate.querySelector(".date_dd").getAttribute("val")))+1,t=a%t+g.minY,e=g.type?0:1,a=f[a].Intercalation||0,!g.type&&a&&(a==r-1?r=-(r-1):a<r-1&&--r),r=l(e,t,r,n),(n=f[r.yy-g.minY].Intercalation?f[r.yy-g.minY].Intercalation:0)&&g.type&&(r.mm<0?r.mm=1-r.mm:r.mm>n&&(r.mm=r.mm+1)),g.gearDate.querySelector(".date_yy").setAttribute("val",r.yy-g.minY),g.gearDate.querySelector(".date_mm").setAttribute("val",r.mm-1),g.gearDate.querySelector(".date_dd").setAttribute("val",r.dd-1),g.gearDate.querySelector(".date_yy").setAttribute("top",""),o())}function o(){var e=g.maxY-g.minY+1,t=g.gearDate.querySelector(".date_yy"),a="";if(t&&t.getAttribute("val")){for(var r=parseInt(t.getAttribute("val")),n=0;n<=e-1;n++)a+="<div class='tooth'>"+(g.minY+n)+"</div>";t.innerHTML=a;var i=Math.floor(parseFloat(t.getAttribute("top")));isNaN(i)?(t.style.transform="translate(0,"+(8-2*r)+"em)",t.style["-webkit-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-moz-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-ms-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-o-transform"]="translate(0,"+(8-2*r)+"em)",t.setAttribute("top",8-2*r+"em")):(i%2==0||(i+=1),8<i&&(i=8),i<(d=8-2*(e-1))&&(i=d),t.style.transform="translate(0,"+i+"em)",t.style["-webkit-transform"]="translate(0,"+i+"em)",t.style["-moz-transform"]="translate(0,"+i+"em)",t.style["-ms-transform"]="translate(0,"+i+"em)",t.style["-o-transform"]="translate(0,"+i+"em)",t.setAttribute("top",i+"em"),r=Math.abs(i-8)/2,t.setAttribute("val",r));var d=g.gearDate.querySelector(".date_mm");if(d&&d.getAttribute("val")){a="";var s,i=parseInt(d.getAttribute("val")),o=f[r].Intercalation||0;s=o&&g.type?12:11;var l=0;r==e-1&&(s=(g.type,g.maxM-1)),0==r&&(l=g.type?g.minM-1:g.minM);for(n=0;n<s-l+1;n++){var m=l+n+1;g.type&&(m=o&&o==n?v("rm",m-1):v("mm",o&&o<n?m-1:m)),a+="<div class='tooth'>"+m+"</div>"}d.innerHTML=a,(s<i||i<l)&&(i=s,d.setAttribute("val",i)),d.style.transform="translate(0,"+(8-2*(i-l))+"em)",d.style["-webkit-transform"]="translate(0,"+(8-2*(i-l))+"em)",d.style["-moz-transform"]="translate(0,"+(8-2*(i-l))+"em)",d.style["-ms-transform"]="translate(0,"+(8-2*(i-l))+"em)",d.style["-o-transform"]="translate(0,"+(8-2*(i-l))+"em)",d.setAttribute("top",8-2*(i-l)+"em");t=g.gearDate.querySelector(".date_dd");if(t&&t.getAttribute("val")){a="";var d=parseInt(t.getAttribute("val")),c=_(r,i)-1,u=0;r==e-1&&12==i+1&&(c=g.type?g.maxD-25:g.maxD-1),0==r&&2==i+1&&(u=g.type?g.minD-1:g.minD+6);for(n=0;n<c-u+1;n++)a+="<div class='tooth'>"+(m=g.type?v("dd",u+n+1):u+n+1)+"</div>";t.innerHTML=a,c<d?(d=c,t.setAttribute("val",d)):d<u&&(d=u,t.setAttribute("val",d)),t.style.transform="translate(0,"+(8-2*(d-u))+"em)",t.style["-webkit-transform"]="translate(0,"+(8-2*(d-u))+"em)",t.style["-moz-transform"]="translate(0,"+(8-2*(d-u))+"em)",t.style["-ms-transform"]="translate(0,"+(8-2*(d-u))+"em)",t.style["-o-transform"]="translate(0,"+(8-2*(d-u))+"em)",t.setAttribute("top",8-2*(d-u)+"em");d=g.gearDate.querySelector(".date_hh");if(d&&d.getAttribute("val")){for(var y=parseInt(d.getAttribute("val")),a="<div class='tooth'>时辰未知</div>",n=0;n<24;n++){m=v("hh",n);g.gearDate.querySelector(".date_ii")&&(m=(n<10?"0"+n:n)+"时"),a+="<div class='tooth'>"+m+"</div>"}d.innerHTML=a,d.style.transform="translate(0,"+(8-2*y)+"em)",d.style["-webkit-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-moz-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-ms-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-o-transform"]="translate(0,"+(8-2*y)+"em)",d.setAttribute("top",8-2*y+"em")}d=g.gearDate.querySelector(".date_ii");if(d&&d.getAttribute("val")){y=parseInt(d.getAttribute("val"));a="";for(n=0;n<60;n++)a+="<div class='tooth'>"+(m=(n<10?"0"+n:n)+"分")+"</div>";d.innerHTML=a,d.style.transform="translate(0,"+(8-2*y)+"em)",d.style["-webkit-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-moz-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-ms-transform"]="translate(0,"+(8-2*y)+"em)",d.style["-o-transform"]="translate(0,"+(8-2*y)+"em)",d.setAttribute("top",8-2*y+"em")}A()}}}}function _(e,t){return 1==g.type?f[e].MonthDays[t]?30:29:1==t?(e+=g.minY)%4==0&&e%100!=0||e%400==0&&e%4e3!=0?29:28:3==t||5==t||8==t||10==t?30:31}function v(e,t){return"rm"==e?["闰正月","闰二月","闰三月","闰四月","闰五月","闰六月","闰七月","闰八月","闰九月","闰十月","闰冬月","闰腊月"][t-1]:"mm"==e?["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t-1]:"dd"==e?["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十","三十一"][t-1]:"hh"==e?["00:00-00:59(早子)","01:00-01:59(丑)","02:00-02:59(丑)","03:00-03:59(寅)","04:00-04:59(寅)","05:00-05:59(卯)","06:00-06:59(卯)","07:00-07:59(辰)","08:00-08:59(辰)","09:00-09:59(巳)","10:00-10:59(巳)","11:00-11:59(午)","12:00-12:59(午)","13:00-13:59(未)","14:00-14:59(未)","15:00-15:59(申)","16:00-16:59(申)","17:00-17:59(酉)","18:00-18:59(酉)","19:00-19:59(戌)","20:00-20:59(戌)","21:00-21:59(亥)","22:00-22:59(亥)","23:00-23:59(晚子)"][t]:"hhcn"==e?["子","丑","丑","寅","寅","卯","卯","辰","辰","巳","巳","午","午","未","未","申","申","酉","酉","戌","戌","亥","亥","子"][t]:void 0}function l(e,t,a,r){var t=t,a=a,r=r,n=[0,31,59,90,120,151,181,212,243,273,304,334,365,396,0,31,60,91,121,152,182,213,244,274,305,335,366,397];if(0==e){var i=parseInt(t),d=parseInt(a),s=parseInt(r),o=d-1,l=w(i),m=(m=((h=n[14*l+o]+s)+f[g=i-1940].BaseKanChih)%60)<22?22-m:82-m;(m+=3)<10&&(m+=60),h<=f[g].BaseDays?(g--,h=n[14*(l=w(_=i-1))+(o+=12)]+s):_=i;var c=f[g].BaseDays;for(p=0;p<13;p++){var u=c+f[g].MonthDays[p]+29;if(h<=u)break;c=u}var y=p+1,m=h-c;return 0!=(o=f[g].Intercalation)&&o<y&&--y==o&&(y=-o),12<y&&(y-=12),{yy:_,mm:y,dd:m}}var g,_=parseInt(t),y=parseInt(a),m=parseInt(r),v=y;0!=(o=f[g=_-1940].Intercalation)&&(o<v?v++:v==-o&&(v=o+1)),v--;for(var h=0,p=0;p<v;p++)h+=f[g].MonthDays[p]+29;h+=f[g].BaseDays+m;for(l=w(_),p=13;0<=p&&!(n[14*l+p]<h);p--);return d=p<=11?(i=_,p+1):(i=_+1,p-11),{yy:i,mm:d,dd:s=h-n[14*l+p]}}function w(e){return e%400==0||e%100!=0&&e%4==0?1:0}function a(e,t,a,r,n,i,d,s,o,l,m,c,u,y,g,_,v){this.BaseDays=e,this.Intercalation=t,this.BaseWeekday=a,this.BaseKanChih=r,this.MonthDays=[n,i,d,s,o,l,m,c,u,y,g,_,v]}function m(e){var t=((e=e||event).wheelDelta?0<e.wheelDelta:e.detail<0)?21:-21;e.preventDefault();for(var a=e.target;!a.classList.contains("gear");)a=a.parentElement;clearInterval(a["int_"+a.id]),a["old_"+a.id]=0,a["o_t_"+a.id]=(new Date).getTime();var r=a.getAttribute("top");a["o_d_"+a.id]=r?parseFloat(r.replace(/em/g,"")):0,a["new_"+a.id]=t,a["n_t_"+a.id]=(new Date).getTime()+360;t=18*(a["new_"+a.id]-a["old_"+a.id])/370;a["pos_"+a.id]=a["o_d_"+a.id]+t,a.setAttribute("top",a["pos_"+a.id]+"em");t=(a["new_"+a.id]-a["old_"+a.id])/(a["n_t_"+a.id]-a["o_t_"+a.id]);return Math.abs(t)<=.2?a["spd_"+a.id]=t<0?-.08:.08:Math.abs(t)<=.5?a["spd_"+a.id]=t<0?-.16:.16:a["spd_"+a.id]=t/2,a["pos_"+a.id]||(a["pos_"+a.id]=0),e.preventDefault&&e.preventDefault(),n(a),!1}function c(e){e.preventDefault();for(var t=e.target,a=t,r=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.screenY,t["o_t_"+t.id]=(new Date).getTime();e=t.getAttribute("top");t["o_d_"+t.id]=e?parseFloat(e.replace(/em/g,"")):0,document.onmousemove=function(e){r=!0,(e=e||window.event).preventDefault();for(var t=a;t&&!t.classList.contains("gear");)t=t.parentElement;t&&(t["new_"+t.id]=e.screenY,t["n_t_"+t.id]=(new Date).getTime(),e=18*(t["new_"+t.id]-t["old_"+t.id])/370,t["pos_"+t.id]=t["o_d_"+t.id]+e,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em"))},document.onmouseup=function(e){if(!r)return document.onmousemove=null,document.onmouseup=null,!1;(e=e||window.event).preventDefault();for(var t=a;t&&!t.classList.contains("gear");)t=t.parentElement;t&&(e=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]),Math.abs(e)<=.2?t["spd_"+t.id]=e<0?-.08:.08:Math.abs(e)<=.5?t["spd_"+t.id]=e<0?-.16:.16:t["spd_"+t.id]=e/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),n(t),document.onmousemove=null,document.onmouseup=null)}}function u(e){e.preventDefault();var t=e.target;for(t.touchTip=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.targetTouches[0].screenY,t["o_t_"+t.id]=(new Date).getTime();e=t.getAttribute("top");t["o_d_"+t.id]=e?parseFloat(e.replace(/em/g,"")):0}function y(e){e.preventDefault();var t=e.target;for(t.touchTip=!0;!t.classList.contains("gear");)t=t.parentElement;t["new_"+t.id]=e.targetTouches[0].screenY,t["n_t_"+t.id]=(new Date).getTime();e=18*(t["new_"+t.id]-t["old_"+t.id])/370;t["pos_"+t.id]=t["o_d_"+t.id]+e,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em")}function h(e){e.preventDefault();var t=e.target;if(!t.touchTip)return!1;for(;!t.classList.contains("gear");)t=t.parentElement;e=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(e)<=.2?t["spd_"+t.id]=e<0?-.08:.08:Math.abs(e)<=.5?t["spd_"+t.id]=e<0?-.16:.16:t["spd_"+t.id]=e/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),n(t)}function n(o){var l=0,m=!1,c=g.maxY-g.minY+1;clearInterval(o["int_"+o.id]),o["int_"+o.id]=setInterval(function(){var e=o["pos_"+o.id],t=o["spd_"+o.id]*Math.exp(-.03*l);switch(e+=t,.1<Math.abs(t)||(t=.1,t=2*Math.round(e/2),Math.abs(e-t)<.02?m=!0:t<e?e-=.1:e+=.1),8<e&&(e=8,m=!0),o.getAttribute("data-datetype")){case"date_yy":e<(i=8-2*(c-1))&&(e=i,m=!0),m&&(d=Math.abs(e-8)/2,p(o,d),clearInterval(o["int_"+o.id]));break;case"date_mm":var a=g.gearDate.querySelector(".date_yy"),r=parseInt(a.getAttribute("val"));s=(f[r].Intercalation||0)&&g.type?12:11;var n=0;r==c-1&&(s=(g.type,g.maxM-1)),0==r&&(n=g.type?g.minM-1:g.minM),e<(i=8-2*(s-n))&&(e=i,m=!0),m&&(d=Math.abs(e-8)/2+n,p(o,d),clearInterval(o["int_"+o.id]));break;case"date_dd":var i,d,a=g.gearDate.querySelector(".date_yy"),s=g.gearDate.querySelector(".date_mm"),r=parseInt(a.getAttribute("val")),n=parseInt(s.getAttribute("val")),a=_(r,n)-1,s=0;r==c-1&&12==n+1&&(a=g.type?g.maxD-25:g.maxD-1),0==r&&2==n+1&&(s=g.type?g.minD-1:g.minD+6),e<(i=8-2*(a-s))&&(e=i,m=!0),m&&(d=Math.abs(e-8)/2+s,p(o,d),clearInterval(o["int_"+o.id]));break;case"date_hh":e<(i=-40)&&(e=i,m=!0),m&&(d=Math.abs(e-8)/2,p(o,d),clearInterval(o["int_"+o.id]));break;case"date_ii":e<(i=-110)&&(e=i,m=!0),m&&(d=Math.abs(e-8)/2,p(o,d),clearInterval(o["int_"+o.id]))}o["pos_"+o.id]=e,o.style.transform="translate(0,"+e+"em)",o.style["-webkit-transform"]="translate(0,"+e+"em)",o.style["-moz-transform"]="translate(0,"+e+"em)",o.style["-ms-transform"]="translate(0,"+e+"em)",o.style["-o-transform"]="translate(0,"+e+"em)",o.setAttribute("top",e+"em"),l++},6)}function p(e,t){t=Math.round(t),e.setAttribute("val",t),o()}function b(e,t){var a=g.gearDate.querySelector(".lcalendar_finish"),r=g.gearDate.querySelector(".lcalendar_cancel");if(e.preventDefault(),+a.getAttribute("data-isconfirm")&&!t)return A(),a.setAttribute("data-isconfirm",0),g.gearDate.querySelector(".date_choice_wrap").style.display="block",g.gearDate.querySelector(".date_btn_wrap").style.display="block",g.gearDate.querySelector(".date_confirm_wrap").style.display="none",a.innerHTML="完成",!(r.innerHTML="取消");"function"==typeof window.CustomEvent&&(r=new CustomEvent("input"),g.trigger.dispatchEvent(r)),document.body.removeChild(g.gearDate)}function D(e){var t=A(),a=g.gearDate.querySelector(".lcalendar_finish"),r=g.gearDate.querySelector(".lcalendar_cancel");if(!+a.getAttribute("data-isconfirm")&&"true"==g.trigger.getAttribute("data-confirm")){var n=g.gearDate.querySelector(".confirm_nongli"),i=g.gearDate.querySelector(".confirm_gongli");g.gearDate.querySelector(".date_choice_wrap").style.display="none",g.gearDate.querySelector(".date_btn_wrap").style.display="none",g.gearDate.querySelector(".date_confirm_wrap").style.display="block",a.setAttribute("data-isconfirm",1),a.innerHTML="确认",r.innerHTML="返回修改";var d="",s="";void 0!==t.hh&&(t.hh<0?s=d="时辰未知":(s=t.hh+"时",d=v("hhcn",t.hh)+"时"));var o="";void 0!==t.ii&&0<=t.ii&&0<=t.hh&&(o=t.ii+"分"),i.innerHTML=t.yy+"年"+t.mm+"月"+t.dd+"日 "+s+o;var l=t._mm<0?v("rm",-t._mm):v("mm",t._mm);return n.innerHTML=""!=o?t._yy+"年"+l+v("dd",t._dd)+" "+s+o:t._yy+"年"+l+v("dd",t._dd)+" "+d+o,!1}g.trigger.setAttribute("data-date",t.yy+"-"+t.mm+"-"+t.dd),g.trigger.setAttribute("data-sdate",t._yy+"-"+t._mm+"-"+t._dd),g.trigger.setAttribute("data-hour",t.hh),g.trigger.setAttribute("data-minute",t.ii);var m=g.trigger.getAttribute("data-toid-date"),a=g.trigger.getAttribute("data-toid-year"),r=g.trigger.getAttribute("data-toid-month"),i=g.trigger.getAttribute("data-toid-day"),n=g.trigger.getAttribute("data-toid-hour"),s=g.trigger.getAttribute("data-toid-minute"),d=g.trigger.getAttribute("data-toid-sdate");m&&(document.getElementById(m).value=t.yy+"-"+t.mm+"-"+t.dd),a&&(document.getElementById(a).value=t.yy),r&&(document.getElementById(r).value=t.mm),i&&(document.getElementById(i).value=t.dd),n&&(document.getElementById(n).value=t.hh<0?"":t.hh),d&&(document.getElementById(d).value=t._yy+"-"+t._mm+"-"+t._dd),s&&(document.getElementById(s).value=t.ii<0?"":t.ii);d="",o="";s&&0<=t.hh&&0<=t.ii&&(o=t.ii+"分"),g.type?(l=t._mm<0?v("rm",-t._mm):v("mm",t._mm),n&&(d=t.hh<0?"时辰未知":""!=o?t.hh+"时":v("hhcn",t.hh)+"时"),g.trigger.value="农历:"+t._yy+"年"+l+v("dd",t._dd)+" "+d+o):(n&&(d=t.hh<0?"时辰未知":t.hh+"时"),g.trigger.value="公历:"+t.yy+"-"+t.mm+"-"+t.dd+" "+d+o),g.callback({date:t.yy+"/"+t.mm+"/"+t.dd,yy:t.yy,mm:t.mm,dd:t.dd,hh:t.hh,_date:t._yy+"/"+Math.abs(t._mm)+"/"+t._dd,_dateCn:t._yy+"/"+(t._mm<0?v("rm",-t._mm):v("mm",t._mm))+"/"+v("dd",t._dd),_yy:t._yy,_mm:Math.abs(t._mm),_mmCn:t._mm<0?v("rm",-t._mm):v("mm",t._mm),run:t._mm<0,_dd:t._dd,_ddCn:v("dd",t._dd),_hh:t.hh,_hhCn:v("hhcn",t.hh)||"时辰未知"}),b(e,"finish")}function A(){var e,t,a=g.maxY-g.minY+1,r=parseInt(Math.round(g.gearDate.querySelector(".date_yy").getAttribute("val"))),n=r%a+g.minY,i=parseInt(Math.round(g.gearDate.querySelector(".date_mm").getAttribute("val")))+1,a=parseInt(Math.round(g.gearDate.querySelector(".date_dd").getAttribute("val")))+1;(g.gearDate.querySelector(".date_hh")?1:0)&&(e=parseInt(Math.round(g.gearDate.querySelector(".date_hh").getAttribute("val")))-1),(g.gearDate.querySelector(".date_ii")?1:0)&&(t=parseInt(Math.round(g.gearDate.querySelector(".date_ii").getAttribute("val"))));r=f[r].Intercalation||0;g.type&&r&&(r==i-1?i=-(i-1):r<i-1&&--i);r=l(g.type,n,i,a);return g.type?(g.trigger.setAttribute("data-type",1),{yy:r.yy,mm:r.mm,dd:r.dd,_yy:n,_mm:i,_dd:a,hh:e,ii:t}):(g.trigger.setAttribute("data-type",0),{_yy:r.yy,_mm:r.mm,_dd:r.dd,yy:n,mm:i,dd:a,hh:e,ii:t})}var r=!1,i=0;"ontouchstart"in window?(g.trigger.addEventListener("touchstart",function(e){i=Date.now()}),g.trigger.addEventListener("touchmove",function(e){r=!0}),g.trigger.addEventListener("touchend",function(e){!r&&Date.now()-i<150&&(e.preventDefault(),t()),r=!1,i=0})):g.trigger.addEventListener("click",function(){t()})}},datePicker}();